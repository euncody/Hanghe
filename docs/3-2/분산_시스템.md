# 🌐 분산 시스템(Distributed System) 이란?

* **정의**: 하나의 거대한 시스템처럼 동작하지만, 실제로는 여러 대의 독립적인 컴퓨터(노드)가 네트워크로 연결되어 협력하는 시스템.
* **예시**:

    * 구글 검색엔진 → 수천 대 서버가 동시에 검색 쿼리를 처리
    * 카카오톡/왓츠앱 같은 메신저 → 전 세계 수억 명에게 메시지를 안정적으로 전달
    * 블록체인 → 수많은 노드가 거래 내역을 동기화

---

# 🚩 왜 특별한 개념들이 필요할까?

## 1. 장애와 네트워크 문제

* 단일 서버라면 단순히 DB 락(lock)으로 동기화하면 됨.
* 분산 환경에서는 서버가 언제든 **죽을 수 있고, 네트워크가 끊길 수 있음**.
  → 그래서 **합의 알고리즘**(Consensus)이 필요해요.
  (예: 어느 노드가 리더인지, 어떤 데이터가 진짜인지 결정)

---

## 2. 데이터 일관성 (Consistency)

* 여러 노드에 동일한 데이터를 저장해야 함.
* 동시에 쓰기가 발생하면 충돌(conflict)이 생길 수 있음.

    * 해결책:

        * **CRDT(G-Set)**: 충돌이 일어나도 자동으로 병합되는 데이터 구조
        * **List/Sorted Set**: 순서나 랭킹 같은 추가적인 제약이 필요할 때

---

## 3. 확장성 (Scalability)

* 서버를 계속 늘려도 잘 동작해야 함.
* Snowflake 같은 합의 알고리즘은 **확률적 투표 방식**으로 빠른 확장성을 제공.
* Sorted Set은 Redis 같은 분산 캐시/DB에서 **랭킹, 순위, 우선순위**를 효율적으로 처리.

---

## 4. 신뢰와 보안

* 블록체인 같은 시스템은 신뢰할 수 없는 노드(악의적인 노드)도 참여함.
* 그래서 **Snowflake, PBFT** 같은 합의 알고리즘으로 **모두가 믿을 수 있는 결과**를 도출해야 함.

---

# 🧩 요약 

* **클러스터 합의 / 합의 알고리즘** → 노드들이 동일한 결정을 내리도록 보장
* **메트릭** → 분산 시스템 성능을 측정하고 안정성 확인
* **Snowflake** → 대규모 네트워크에서도 빠른 합의 (블록체인)
* **Sorted Set** → 분산 캐시(DB)에서 순위/점수 관리
* **G-Set, List** → 충돌 없는 데이터 동기화 (CRDT)

---

즉,
👉 분산 시스템은 \*\*“한 대의 컴퓨터로 해결할 수 없는 규모와 안정성 문제”\*\*를 해결하기 위해 만들어졌고,
👉 그 과정에서 **합의, 충돌 없는 데이터 구조, 빠른 정렬/순위 지원** 같은 개념이 필수적으로 등장한 거예요.
