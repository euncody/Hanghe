
# 🔄 동시성 문제란?

동시성 문제란 **여러 작업(스레드, 프로세스)이 동시에 같은 자원에 접근하거나 작업을 수행할 때 발생하는 오류나 비정상적인 동작**을 말해요.

쉽게 말해서, **여러 사람이 동시에 하나의 파일을 수정하거나 같은 엘리베이터 버튼을 누르는 상황**을 상상하면 이해하기 쉬워요.

---

## 💡 비유로 이해하는 동시성 문제

### 🍹 공용 냉장고 문제

1. 세 명이 동시에 냉장고에서 콜라를 꺼냅니다.
2. 각자 **콜라가 1개 남았다고 생각하고** 꺼냅니다.
3. 실제로는 콜라 1개뿐인데, **두 번 꺼내져서 충돌 발생!**

👉 **문제**: 냉장고 상태(콜라 개수)가 동시에 읽히고 수정되어 충돌.  
👉 **컴퓨터에서의 사례**: 여러 스레드가 동시에 같은 변수 값을 수정하려 할 때.

---

## 🧠 동시성 문제의 주요 원인

| 원인                      | 설명 |
|---------------------------|------|
| **공유 자원 접근**       | 여러 작업이 하나의 변수, 파일, 데이터베이스에 동시에 접근할 때 |
| **작업 순서 불일치**     | 코드 실행 순서가 예상과 다르게 실행될 때 |
| **락 미사용 또는 과도 사용** | 자원 보호 락이 없거나 너무 많아 교착 상태(deadlock) 발생 |

---

## 🧨 대표적인 동시성 문제 예시

### 1. Race Condition (경쟁 상태)

- 결과가 **실행 순서에 따라 달라짐**.
- 예) 은행 계좌에서 동시에 출금 → 잔액보다 많이 출금됨.

### 2. Deadlock (교착 상태)

- 서로 락을 걸고 기다리기만 해서 **영원히 멈춤**.
- 예) 두 사람이 서로 자원을 기다리며 끝없이 대기.

### 3. Live Lock (활성 교착)

- 서로 양보하다가 **계속 작업 진행 못함**.
- 예) 좁은 복도에서 양보하다가 계속 길을 막음.

---

## 🔧 동시성 문제 해결 방법

| 방법                     | 설명 |
|--------------------------|------|
| **락(Lock)**            | 한 번에 하나만 자원 접근 가능하게 막음 |
| **세마포어(Semaphore)** | 제한된 수만큼 동시에 접근 허용 |
| **뮤텍스(Mutex)**       | 락과 비슷, 더 엄격한 통제 |
| **트랜잭션(Transaction)** | 데이터베이스에서 작업의 원자성 보장 |
| **비동기 처리 / 큐**   | 순차적으로 작업 처리 (예: 메시지 큐 사용) |

---

## 💬 정리 

1. 동시성 문제는 여러 작업이 동시에 하나의 자원을 사용할 때 충돌이나 오류가 생기는 문제다.
2. 대표적인 문제로 경쟁 상태, 교착 상태 등이 있으며, 실행 순서에 따라 결과가 달라질 수 있다.
3. 이를 막기 위해 락, 트랜잭션, 큐 등 다양한 기술을 사용한다.
